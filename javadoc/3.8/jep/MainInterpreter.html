<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_144) on Wed Jun 13 15:09:36 CDT 2018 -->
<title>MainInterpreter</title>
<meta name="date" content="2018-06-13">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MainInterpreter";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9,"i2":10,"i3":9,"i4":9,"i5":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../jep/JepScriptEngineFactory.html" title="class in jep"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../jep/NamingConventionClassEnquirer.html" title="class in jep"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?jep/MainInterpreter.html" target="_top">Frames</a></li>
<li><a href="MainInterpreter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">jep</div>
<h2 title="Class MainInterpreter" class="title">Class MainInterpreter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>jep.MainInterpreter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.AutoCloseable</dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">MainInterpreter</span>
extends java.lang.Object
implements java.lang.AutoCloseable</pre>
<div class="block">The main Python interpreter that all sub-interpreters will be created from.
 In a simpler embedded Python project, a single Python interpreter would be
 used and all would be good. However, since Jep supports multithreading with
 multiple sub-interpreters (Jep instances), we need the MainInterpreter to
 work around some issues.
 
 The MainInterpreter is used to avoid potential deadlocks. Python can deadlock
 when trying to acquire the GIL through methods such as <a href=
 "https://docs.python.org/3/c-api/init.html#c.PyGILState_Ensure">PyGILState_*</a>.
 While Jep does not use those methods, CPython extensions such as numpy do.
 The deadlock can occur if there is more than one PyThreadState per thread. To
 get around this, the MainInterpreter creates a unique thread that initializes
 Python and keeps this thread around forever. This ensures that any new
 sub-interpreters cannot be created on the same thread as the main Python
 interpreter.
 
 The MainInterpreter is also used to support shared modules. While each
 sub-interpreter is fairly sandboxed, in practice this does not always work
 well with CPython extensions. In particular, disposing of a sub-interpreter
 that has imported a CPython extension may cause some of the CPython
 extension's objects to be garbage collected. To get around this, shared
 modules import on the main interpreter's thread so they can be shared amongst
 sub-interpreters and will never be garbage collected.
 
 For more information about why the MainInterpreter class exists, see <a href=
 "https://docs.python.org/3/c-api/init.html#bugs-and-caveats">Sub-interpreter
 bugs and caveats</a>.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.8</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../jep/MainInterpreter.html#close--">close</a></span>()</code>
<div class="block">Stop the interpreter thread.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected static <a href="../jep/MainInterpreter.html" title="class in jep">MainInterpreter</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../jep/MainInterpreter.html#getMainInterpreter--">getMainInterpreter</a></span>()</code>
<div class="block">Creates the MainInterpreter instance that will be used by Jep.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../jep/MainInterpreter.html#initialize--">initialize</a></span>()</code>
<div class="block">Initializes CPython, by calling a native function in the jep module, and
 ultimately Py_Initialize().</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../jep/MainInterpreter.html#setInitParams-jep.PyConfig-">setInitParams</a></span>(<a href="../jep/PyConfig.html" title="class in jep">PyConfig</a>&nbsp;config)</code>
<div class="block">Sets interpreter settings for the main Python interpreter.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../jep/MainInterpreter.html#setSharedModulesArgv-java.lang.String...-">setSharedModulesArgv</a></span>(java.lang.String...&nbsp;argv)</code>
<div class="block">Sets the sys.argv values on the main interpreter.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../jep/MainInterpreter.html#sharedImport-java.lang.String-">sharedImport</a></span>(java.lang.String&nbsp;module)</code>
<div class="block">Import a module into the main interpreter on the correct thread for that
 interpreter.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getMainInterpreter--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMainInterpreter</h4>
<pre>protected static&nbsp;<a href="../jep/MainInterpreter.html" title="class in jep">MainInterpreter</a>&nbsp;getMainInterpreter()
                                             throws java.lang.Error</pre>
<div class="block">Creates the MainInterpreter instance that will be used by Jep. This
 should be called from all Jep constructors to ensure the native module
 has been loaded and initialized before a valid Jep instance is produced.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the main interpreter</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Error</code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a name="initialize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>protected&nbsp;void&nbsp;initialize()
                   throws java.lang.Error</pre>
<div class="block">Initializes CPython, by calling a native function in the jep module, and
 ultimately Py_Initialize(). We load on a separate thread to try and avoid
 GIL issues that come about from a sub-interpreter being on the same
 thread as the main interpreter.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Error</code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a name="sharedImport-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sharedImport</h4>
<pre>public&nbsp;void&nbsp;sharedImport(java.lang.String&nbsp;module)
                  throws <a href="../jep/JepException.html" title="class in jep">JepException</a></pre>
<div class="block">Import a module into the main interpreter on the correct thread for that
 interpreter. This is called from the Python shared modules import hook to
 create a module needed by a Jep interpreter.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>module</code> - the name of the module to import</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../jep/JepException.html" title="class in jep">JepException</a></code> - if an error occurs</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Stop the interpreter thread.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
</dl>
</li>
</ul>
<a name="setInitParams-jep.PyConfig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setInitParams</h4>
<pre>public static&nbsp;void&nbsp;setInitParams(<a href="../jep/PyConfig.html" title="class in jep">PyConfig</a>&nbsp;config)
                          throws <a href="../jep/JepException.html" title="class in jep">JepException</a></pre>
<div class="block">Sets interpreter settings for the main Python interpreter. This method
 must be called before the first Jep instance is created in the process.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - the python configuration to use.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../jep/JepException.html" title="class in jep">JepException</a></code> - if an error occurs</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.6</dd>
</dl>
</li>
</ul>
<a name="setSharedModulesArgv-java.lang.String...-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setSharedModulesArgv</h4>
<pre>public static&nbsp;void&nbsp;setSharedModulesArgv(java.lang.String...&nbsp;argv)
                                 throws <a href="../jep/JepException.html" title="class in jep">JepException</a></pre>
<div class="block">Sets the sys.argv values on the main interpreter. This method must be
 called before the first Jep instance is created in the process.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>argv</code> - the arguments to be set on Python's sys.argv for the main
            interpreter</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../jep/JepException.html" title="class in jep">JepException</a></code> - if an error occurs</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.7</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../jep/JepScriptEngineFactory.html" title="class in jep"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../jep/NamingConventionClassEnquirer.html" title="class in jep"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?jep/MainInterpreter.html" target="_top">Frames</a></li>
<li><a href="MainInterpreter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
